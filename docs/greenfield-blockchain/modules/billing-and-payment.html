<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://docs.gnfd.io/docs/greenfield-blockchain/modules/billing-and-payment.html"><meta property="og:site_name" content="BNB Greenfield"><meta property="og:title" content="Billing and Payment"><meta property="og:description" content="Greenfield will charge the users in two parts. Firstly, every transaction will require gas fees to pay the Greenfield validator to write the metadata on-chain. Secondly, the SPs..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2023-03-21T08:22:02.000Z"><meta property="article:modified_time" content="2023-03-21T08:22:02.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Billing and Payment","image":[""],"dateModified":"2023-03-21T08:22:02.000Z","author":[]}</script><title>Billing and Payment | BNB Greenfield</title><meta name="description" content="Greenfield will charge the users in two parts. Firstly, every transaction will require gas fees to pay the Greenfield validator to write the metadata on-chain. Secondly, the SPs...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-28d8b981.css" as="style"><link rel="stylesheet" href="/assets/style-28d8b981.css">
    <link rel="modulepreload" href="/assets/app-770b0b9b.js"><link rel="modulepreload" href="/assets/framework-a045178c.js"><link rel="modulepreload" href="/assets/billing-and-payment.html-8d9a4355.js"><link rel="modulepreload" href="/assets/billing-and-payment.html-57f6120a.js"><link rel="prefetch" href="/assets/index.html-469dca30.js" as="script"><link rel="prefetch" href="/assets/get-started.html-33df32c6.js" as="script"><link rel="prefetch" href="/assets/release-note.html-3aeaee8e.js" as="script"><link rel="prefetch" href="/assets/resources.html-6199b970.js" as="script"><link rel="prefetch" href="/assets/index.html-55fb2645.js" as="script"><link rel="prefetch" href="/assets/events.html-bdcbc1ec.js" as="script"><link rel="prefetch" href="/assets/grpc_rest.html-e9626123.js" as="script"><link rel="prefetch" href="/assets/sdk.html-ca140ca1.js" as="script"><link rel="prefetch" href="/assets/accounts.html-b0c80824.js" as="script"><link rel="prefetch" href="/assets/billing-payment.html-cf967db9.js" as="script"><link rel="prefetch" href="/assets/data-availability.html-a176baa5.js" as="script"><link rel="prefetch" href="/assets/gas-fees.html-f1f399ba.js" as="script"><link rel="prefetch" href="/assets/key-management.html-bb5d1446.js" as="script"><link rel="prefetch" href="/assets/index.html-cfd75339.js" as="script"><link rel="prefetch" href="/assets/simple-storage-svc-model .html-00532725.js" as="script"><link rel="prefetch" href="/assets/transaction-lifecycle.html-c86a5c1a.js" as="script"><link rel="prefetch" href="/assets/index.html-a3c054b7.js" as="script"><link rel="prefetch" href="/assets/quick-start.html-656d29d8.js" as="script"><link rel="prefetch" href="/assets/index.html-13217e7d.js" as="script"><link rel="prefetch" href="/assets/index.html-4f18c6cb.js" as="script"><link rel="prefetch" href="/assets/overview.html-86d8ebe7.js" as="script"><link rel="prefetch" href="/assets/index.html-992307c5.js" as="script"><link rel="prefetch" href="/assets/ecosystem-player.html-9da577d5.js" as="script"><link rel="prefetch" href="/assets/overview.html-0db8d1d6.js" as="script"><link rel="prefetch" href="/assets/token-economics.html-0edd8008.js" as="script"><link rel="prefetch" href="/assets/index.html-dd4f1aed.js" as="script"><link rel="prefetch" href="/assets/overview.html-ca187127.js" as="script"><link rel="prefetch" href="/assets/index.html-824ce066.js" as="script"><link rel="prefetch" href="/assets/bank.html-8f4b857c.js" as="script"><link rel="prefetch" href="/assets/bridge.html-d26b0012.js" as="script"><link rel="prefetch" href="/assets/governance.html-87057919.js" as="script"><link rel="prefetch" href="/assets/key-management.html-cdb355fb.js" as="script"><link rel="prefetch" href="/assets/payment.html-b0352746.js" as="script"><link rel="prefetch" href="/assets/storage-provider.html-66e24e7a.js" as="script"><link rel="prefetch" href="/assets/storage.html-8a990613.js" as="script"><link rel="prefetch" href="/assets/validator-staking.html-61aeb5cf.js" as="script"><link rel="prefetch" href="/assets/consensus-and-staking.html-c1c39335.js" as="script"><link rel="prefetch" href="/assets/cross-chain.html-5cd5b09a.js" as="script"><link rel="prefetch" href="/assets/data-availability-challenge.html-4d89c1c8.js" as="script"><link rel="prefetch" href="/assets/governance.html-c9ad5b48.js" as="script"><link rel="prefetch" href="/assets/permission.html-71ee8801.js" as="script"><link rel="prefetch" href="/assets/index.html-7012d026.js" as="script"><link rel="prefetch" href="/assets/storage-module.html-a7f4cb7f.js" as="script"><link rel="prefetch" href="/assets/storage-provider.html-6694d0d3.js" as="script"><link rel="prefetch" href="/assets/world-state.html-5adbfff5.js" as="script"><link rel="prefetch" href="/assets/interact-node.html-86eb18dd.js" as="script"><link rel="prefetch" href="/assets/index.html-cc7569b1.js" as="script"><link rel="prefetch" href="/assets/run-local-network.html-d31ae1ef.js" as="script"><link rel="prefetch" href="/assets/run-mainnet-node.html-191efb7d.js" as="script"><link rel="prefetch" href="/assets/run-testnet-node.html-adc6be5a.js" as="script"><link rel="prefetch" href="/assets/404.html-8865ce6a.js" as="script"><link rel="prefetch" href="/assets/index.html-371be8f3.js" as="script"><link rel="prefetch" href="/assets/index.html-91535ba8.js" as="script"><link rel="prefetch" href="/assets/get-started.html-a5c53275.js" as="script"><link rel="prefetch" href="/assets/release-note.html-6207f6e7.js" as="script"><link rel="prefetch" href="/assets/resources.html-1edba3d6.js" as="script"><link rel="prefetch" href="/assets/index.html-5c748056.js" as="script"><link rel="prefetch" href="/assets/events.html-43554880.js" as="script"><link rel="prefetch" href="/assets/grpc_rest.html-57270df9.js" as="script"><link rel="prefetch" href="/assets/sdk.html-2e633fc5.js" as="script"><link rel="prefetch" href="/assets/accounts.html-613dcebf.js" as="script"><link rel="prefetch" href="/assets/billing-payment.html-f82549e3.js" as="script"><link rel="prefetch" href="/assets/data-availability.html-9d2b2156.js" as="script"><link rel="prefetch" href="/assets/gas-fees.html-681e5788.js" as="script"><link rel="prefetch" href="/assets/key-management.html-9ba75dfe.js" as="script"><link rel="prefetch" href="/assets/index.html-af0b6faf.js" as="script"><link rel="prefetch" href="/assets/simple-storage-svc-model .html-ebff64de.js" as="script"><link rel="prefetch" href="/assets/transaction-lifecycle.html-20ac0753.js" as="script"><link rel="prefetch" href="/assets/index.html-80c12cff.js" as="script"><link rel="prefetch" href="/assets/quick-start.html-9b377f76.js" as="script"><link rel="prefetch" href="/assets/index.html-c0e11f76.js" as="script"><link rel="prefetch" href="/assets/index.html-eb177e9d.js" as="script"><link rel="prefetch" href="/assets/overview.html-ea7b9b54.js" as="script"><link rel="prefetch" href="/assets/index.html-2138fc86.js" as="script"><link rel="prefetch" href="/assets/ecosystem-player.html-4e998573.js" as="script"><link rel="prefetch" href="/assets/overview.html-e3d61f37.js" as="script"><link rel="prefetch" href="/assets/token-economics.html-4ba9844c.js" as="script"><link rel="prefetch" href="/assets/index.html-1f50686c.js" as="script"><link rel="prefetch" href="/assets/overview.html-f19d4825.js" as="script"><link rel="prefetch" href="/assets/index.html-e6c47454.js" as="script"><link rel="prefetch" href="/assets/bank.html-48e32b23.js" as="script"><link rel="prefetch" href="/assets/bridge.html-57609f77.js" as="script"><link rel="prefetch" href="/assets/governance.html-4c2e25ed.js" as="script"><link rel="prefetch" href="/assets/key-management.html-619ed5e4.js" as="script"><link rel="prefetch" href="/assets/payment.html-75b9a8db.js" as="script"><link rel="prefetch" href="/assets/storage-provider.html-a77cb7d7.js" as="script"><link rel="prefetch" href="/assets/storage.html-bbfb1497.js" as="script"><link rel="prefetch" href="/assets/validator-staking.html-d43eb5bb.js" as="script"><link rel="prefetch" href="/assets/consensus-and-staking.html-fba96138.js" as="script"><link rel="prefetch" href="/assets/cross-chain.html-944b87bc.js" as="script"><link rel="prefetch" href="/assets/data-availability-challenge.html-b92fb871.js" as="script"><link rel="prefetch" href="/assets/governance.html-eb69d76f.js" as="script"><link rel="prefetch" href="/assets/permission.html-a115d3c3.js" as="script"><link rel="prefetch" href="/assets/index.html-ad3096ed.js" as="script"><link rel="prefetch" href="/assets/storage-module.html-69ba4e10.js" as="script"><link rel="prefetch" href="/assets/storage-provider.html-904af57c.js" as="script"><link rel="prefetch" href="/assets/world-state.html-647f321d.js" as="script"><link rel="prefetch" href="/assets/interact-node.html-c37c24b6.js" as="script"><link rel="prefetch" href="/assets/index.html-cc29ea18.js" as="script"><link rel="prefetch" href="/assets/run-local-network.html-0424cd35.js" as="script"><link rel="prefetch" href="/assets/run-mainnet-node.html-a32fd92c.js" as="script"><link rel="prefetch" href="/assets/run-testnet-node.html-83cdb03c.js" as="script"><link rel="prefetch" href="/assets/404.html-8dc761d7.js" as="script"><link rel="prefetch" href="/assets/index.html-483faaac.js" as="script"><link rel="prefetch" href="/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/assets/index-8764208e.js" as="script"><link rel="prefetch" href="/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-f4a4509e.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-0c35011e.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-6e6cbe40.js" as="script"><link rel="prefetch" href="/assets/SearchResult-ca472853.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="BNB Greenfield"><!----><span class="site-name hide-in-pad">BNB Greenfield</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="Home"><span class="font-icon icon iconfont icon-home" style=""></span>Home<!----></a></div><div class="nav-item hide-in-mobile"><a href="/docs/introduction/overview.html" class="nav-link" aria-label="Docs"><!---->Docs<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/bnb-chain/greenfield-docs" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button class="search-pro-button" role="search" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">Search</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-advance" style=""></span><span class="title">Introduction</span><span class="arrow end"></span></button><!----></section></li><li><!--[--><a href="/docs/get-started.html" class="nav-link sidebar-link sidebar-page" aria-label="Get Started"><span class="font-icon icon iconfont icon-creative" style=""></span>Get Started<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-discover" style=""></span><span class="title">Core Concept</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-any" style=""></span><span class="title">Greenfield Blockchain</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/docs/greenfield-blockchain/overview.html" class="nav-link sidebar-link sidebar-page" aria-label="Overview"><!---->Overview<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Modules</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/docs/greenfield-blockchain/modules/storage-module.html" class="nav-link sidebar-link sidebar-page" aria-label="Storage Module"><!---->Storage Module<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/greenfield-blockchain/modules/storage-provider.html" class="nav-link sidebar-link sidebar-page" aria-label="Storage Provider"><!---->Storage Provider<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Billing and Payment"><!---->Billing and Payment<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#concepts-and-formulas" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Concepts and Formulas"><!---->Concepts and Formulas<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#terminology" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Terminology"><!---->Terminology<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#formula" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Formula"><!---->Formula<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#key-workflow" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Key Workflow"><!---->Key Workflow<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#deposit-and-withdrawal" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Deposit and Withdrawal"><!---->Deposit and Withdrawal<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#payment-stream" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Payment Stream"><!---->Payment Stream<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#forced-settlement" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Forced Settlement"><!---->Forced Settlement<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#payment-account" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Payment Account"><!---->Payment Account<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#account-freeze-and-resume" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Account Freeze and Resume"><!---->Account Freeze and Resume<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#storage-fee-price-and-adjustment" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Storage Fee Price and Adjustment"><!---->Storage Fee Price and Adjustment<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#state" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="State"><!---->State<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#parameters" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Parameters"><!---->Parameters<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#keepers" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Keepers"><!---->Keepers<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#messages" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Messages"><!---->Messages<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#msgcreatepaymentaccount" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MsgCreatePaymentAccount"><!---->MsgCreatePaymentAccount<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#msgdeposit" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MsgDeposit"><!---->MsgDeposit<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#msgwithdraw" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MsgWithdraw"><!---->MsgWithdraw<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#msgdisablerefund" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MsgDisableRefund"><!---->MsgDisableRefund<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/docs/greenfield-blockchain/modules/permission.html" class="nav-link sidebar-link sidebar-page" aria-label="Permission"><!---->Permission<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/greenfield-blockchain/modules/cross-chain.html" class="nav-link sidebar-link sidebar-page" aria-label="Cross Chain"><!---->Cross Chain<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/greenfield-blockchain/modules/consensus-and-staking.html" class="nav-link sidebar-link sidebar-page" aria-label="Consensus and Staking"><!---->Consensus and Staking<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/greenfield-blockchain/modules/governance.html" class="nav-link sidebar-link sidebar-page" aria-label="Governance"><!---->Governance<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/greenfield-blockchain/modules/data-availability-challenge.html" class="nav-link sidebar-link sidebar-page" aria-label="Data Availability Challenge"><!---->Data Availability Challenge<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/greenfield-blockchain/modules/world-state.html" class="nav-link sidebar-link sidebar-page" aria-label="World State of Greenfield Blockchain"><!---->World State of Greenfield Blockchain<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Command Line</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Run Node</span><span class="arrow end"></span></button><!----></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-storage" style=""></span><span class="title">Storage Provider</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-app" style=""></span><span class="title">Build Dapps</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-generic" style=""></span><span class="title">API Reference</span><span class="arrow end"></span></button><!----></section></li><li><!--[--><a href="/docs/resources.html" class="nav-link sidebar-link sidebar-page" aria-label="Resources"><span class="font-icon icon iconfont icon-material" style=""></span>Resources<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/docs/release-note.html" class="nav-link sidebar-link sidebar-page" aria-label="Release Note"><span class="font-icon icon iconfont icon-proposal" style=""></span>Release Note<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ask" style=""></span><span class="title">FAQ</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Billing and Payment</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing DateðŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-03-16T15:08:39.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 10 min</span><meta property="timeRequired" content="PT10M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#concepts-and-formulas" class="router-link-active router-link-exact-active toc-link level2">Concepts and Formulas</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#terminology" class="router-link-active router-link-exact-active toc-link level3">Terminology</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#formula" class="router-link-active router-link-exact-active toc-link level3">Formula</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#key-workflow" class="router-link-active router-link-exact-active toc-link level2">Key Workflow</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#deposit-and-withdrawal" class="router-link-active router-link-exact-active toc-link level3">Deposit and Withdrawal</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#payment-stream" class="router-link-active router-link-exact-active toc-link level3">Payment Stream</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#forced-settlement" class="router-link-active router-link-exact-active toc-link level3">Forced Settlement</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#payment-account" class="router-link-active router-link-exact-active toc-link level3">Payment Account</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#account-freeze-and-resume" class="router-link-active router-link-exact-active toc-link level3">Account Freeze and Resume</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#storage-fee-price-and-adjustment" class="router-link-active router-link-exact-active toc-link level3">Storage Fee Price and Adjustment</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#state" class="router-link-active router-link-exact-active toc-link level2">State</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#parameters" class="router-link-active router-link-exact-active toc-link level2">Parameters</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#keepers" class="router-link-active router-link-exact-active toc-link level2">Keepers</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#messages" class="router-link-active router-link-exact-active toc-link level2">Messages</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#msgcreatepaymentaccount" class="router-link-active router-link-exact-active toc-link level3">MsgCreatePaymentAccount</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#msgdeposit" class="router-link-active router-link-exact-active toc-link level3">MsgDeposit</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#msgwithdraw" class="router-link-active router-link-exact-active toc-link level3">MsgWithdraw</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/docs/greenfield-blockchain/modules/billing-and-payment.html#msgdisablerefund" class="router-link-active router-link-exact-active toc-link level3">MsgDisableRefund</a></li><!----><!--]--></ul><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="billing-and-payment" tabindex="-1"><a class="header-anchor" href="#billing-and-payment" aria-hidden="true">#</a> Billing and Payment</h1><p>Greenfield will charge the users in two parts. Firstly, every transaction will require gas fees to pay the Greenfield validator to write the metadata on-chain. Secondly, the SPs charge the users for their storage service. Such payment also happens on the Greenfield. This document is about the latter: how such off-chain service fees are billed and charged.</p><p>There are two kinds of fees for the off-chain service: object storage fee and read fee:</p><ol><li><p>Every object stored on Greenfield is charged a fee based on its size. The storage price is determined by the service providers.</p></li><li><p>There is a free quota for users&#39; objects to be read based on their size, content types, and more. If exceeded, i.e. the object data has been downloaded too many times, SP will limit the bandwidth for more downloads. Users can raise their read quota to get more download quota. The read quota price is determined by the Primary Storage Provider users selected.</p></li></ol><p>The fees are paid on Greenfield in the style of &quot;Stream&quot; from users to the SPs at a constant rate. The fees are charged every second as they are used.</p><h2 id="concepts-and-formulas" tabindex="-1"><a class="header-anchor" href="#concepts-and-formulas" aria-hidden="true">#</a> Concepts and Formulas</h2><p>Streaming is a constant by-the-second movement of funds from a sending account to a receiving account. Instead of sending payment transactions now and then, Greenfield records the static balance, the latest update timestamp, and flow rate in its payment module, and calculates the dynamic balance with a formula using this data in the records. If the net flow rate is not zero, the dynamic balance will change as time elapses.</p><h3 id="terminology" tabindex="-1"><a class="header-anchor" href="#terminology" aria-hidden="true">#</a> Terminology</h3><ul><li><p><strong>Payment Module:</strong> This is a special module and ledger system managing the billing and payment on the Greenfield blockchain. Funds will be deposited or charged into it from users&#39; balance or payment accounts in this Payment Module.</p></li><li><p><strong>Stream Account</strong>: The Payment Module has its own ledger for billing management. Users can deposit and withdraw funds into their corresponding &quot;accounts&quot; on the payment module ledger. These accounts are called &quot;Stream Account&quot;, which will directly interact with the stream payment functions and bill the users for the storage and data service.</p></li><li><p><strong>Payment Account</strong>: Payment account has been discussed in other sections of Part 1 and Part 3 already. It is actually a type of Stream Account. Users can create different payment accounts and associate it with different buckets for different purposes.</p></li><li><p><strong>Payment Stream:</strong> Whenever the users add/delete/change a storage object or download a data package, they add or change one or more &quot;payment streams&quot; for that service provided by SPs.</p></li><li><p><strong>Flow Rate</strong>: The per-second rate at which a sender decreases its net outflow stream and increases a receiver&#39;s net inflow stream when creating or updating a payment stream.</p></li><li><p><strong>Netflow Rate</strong>: The per-second rate that an account&#39;s balance is changing. It is the sum of the account&#39;s inbound and outbound flow rates.</p></li><li><p><strong>Sender</strong>: The stream account that starts the payment stream by specifying a receiver and a flow rate at which its net flow decreases.</p></li><li><p><strong>Receiver</strong>: The stream account on the receiving end of one or more payment streams.</p></li><li><p><strong>CRUD Timestamp</strong>: The timestamp of when the user creates, updates, or deletes a payment stream.</p></li><li><p><strong>Delta Balance</strong>: The amount of the stream account&#39;s balance has changed since the latest CRUD timestamp due to the flow. It can be positive or negative.</p></li><li><p><strong>Static Balance</strong>: The balance of the stream account at the latest CRUD timestamp.</p></li><li><p><strong>Dynamic Balance</strong>: The actual balance of a stream account. It is the sum of the Static Balance and the Delta Balance.</p></li></ul><p>When a user&#39;s stream account is initiated in the payment module by deposit, several fields will be recorded for this stream account:</p><ul><li><p>CRUD Timestamp - will be the timestamp at the time.</p></li><li><p>Static Balance - will be the deposit amount.</p></li><li><p>Netflow Rate - will be 0.</p></li><li><p>Buffer Balance - will be 0.</p></li></ul><h3 id="formula" tabindex="-1"><a class="header-anchor" href="#formula" aria-hidden="true">#</a> Formula</h3><p><em>Static Balance = Initial Balance at latest CRUD timestamp</em></p><p><em>Delta Balance = Netflow Rate * Seconds elapsed since latest CRUD timestamp</em></p><p><em>Current Balance = Static Balance + Delta Balance</em></p><p><em>Buffer Balance = - Netflow Rate * pre-configed ReserveTime if Netflow Rate is negative</em></p><div align="center"><img src="https://github.com/bnb-chain/greenfield-whitepaper/blob/main/assets/21.1 How a User Receives Inflow and Outflow of Funds.jpg" height="60%" width="60%"></div><div align="center"><i>Figure 21.1 How a User Receives Inflow and Outflow of Funds</i></div><p>Every time a user creates, updates, or deletes a payment stream, many variables in the above formulas will be updated and the users&#39; stream accounts in the payment module will be settled.</p><ul><li><p>The net flow for the user&#39;s stream account in the payment module will be re-calculated to net all of its inbound and outbound flow rates by adding/removing the new payment stream against the current NetFlow Rate. E.g. when a user creates a new object whose price is $0.4/month, its NetFlow Rate will add -$0.4/month.</p></li><li><p>If the NetFlow rate is negative, the associated amount of BNB will be reserved in a buffer balance. It is used to avoid the dynamic balance becoming negative. When the dynamic balance becomes under the threshold, the account will be forced settled.</p></li><li><p>CRUD Timestamp will become the current timestamp.</p></li><li><p>Static Balance will be re-calculated. The previous dynamic balance will be settled. The new static Balance will be the Current Balance plus the change of the Buffer Balance.</p></li></ul><h2 id="key-workflow" tabindex="-1"><a class="header-anchor" href="#key-workflow" aria-hidden="true">#</a> Key Workflow</h2><h3 id="deposit-and-withdrawal" tabindex="-1"><a class="header-anchor" href="#deposit-and-withdrawal" aria-hidden="true">#</a> Deposit and Withdrawal</h3><p>All users(including SPs) can deposit and withdraw BNB in the payment module. The StaticBalance in the StreamPayment data struct will be &quot;settled&quot; first: the CRUDTimeStamp will be updated and StaticBalance will be netted with DeltaBalance. Then the deposit and withdrawal number will try to add/reduce the StaticBalance in the record. If the static balance is less than the withdrawal amount, the withdrawal will fail.</p><p>Deposit/withdrawal via cross-chain will also be supported to enable users to deposit/withdraw from BSC directly.</p><p>Specifically, the payment deposit can be triggered automatically during the creation of objects or the addition of data packages. As long as users have assets in their address accounts and payment accounts, the payment module may directly charge the users by moving the funds from address accounts.</p><h3 id="payment-stream" tabindex="-1"><a class="header-anchor" href="#payment-stream" aria-hidden="true">#</a> Payment Stream</h3><p>Payment streams are flowing in one direction. Whenever the users deposit from their address accounts into the stream accounts (including users&#39; default stream account and created payment accounts), the funds first go from the users&#39; address accounts to a system account maintained by the Payment Module, although the fund size and other payment parameters will be recorded on the users&#39; stream account, i.e. the StreamPayment record, in the Payment Module ledger. When the payment is settled, the funds will go from the system account to SPs&#39; address accounts according to their in-flow calculation.</p><p>Every time users do the actions below, their StreamRecord will be updated:</p><ul><li><p>Creating an object will create new streams to the SPs</p></li><li><p>Deleting an object will delete associated streams to the SPs</p></li><li><p>Adjusting the read quota will create/delete/update the associated streams</p></li></ul><h3 id="forced-settlement" tabindex="-1"><a class="header-anchor" href="#forced-settlement" aria-hidden="true">#</a> Forced Settlement</h3><p>If a user doesn&#39;t deposit for a long time, his previous deposit may be all used up for the stored objects. Greenfield has a forced settlement mechanism to ensure enough funds are secured for further service fees.</p><p>There are two configurations, ReserveTime and ForcedSettleTime. Let&#39;s say 7 days and 1 day. If a user wants to store an object at the price of approximately $0.1 per month($0.00000004/second), he must reserve fees for 7 days in buffer balance, which is <code>$0.00000004 * 7 * 86400 = $0.024192</code>. If the user deposits $1 initially, the stream payment record will be as below.</p><ul><li><p>CRUD Timestamp: 100</p></li><li><p>Static Balance: $0.975808</p></li><li><p>Netflow Rate: -$0.00000004/sec</p></li><li><p>Buffer Balance: $0.024192</p></li></ul><p>After 10000 seconds, the dynamic balance of the user is <code>0.975808 - 10000 * 0.00000004 = 0.975408</code>.</p><p>After 24395200 seconds(approximately 282 days), the dynamic balance of the user will become negative. Users should have some alarms for such events that remind them to supply more funds in time.</p><p>If no more funds are supplied and the dynamic balance plus buffer balance is under the forced settlement threshold, the account will be forcibly settled. All payment streams of the account will be closed and the account will be marked as out of balance. The download speed for all objects associated with the account or payment account will be downgraded. The objects will be deleted by the SPs if no fund is provided within the predefined threshold.</p><p>The forced settlement will also charge some fees which is another incentive for users to replenish funds proactively.</p><p>Let&#39;s say the ForceSettlementTime is 1 day. After 24913601 seconds(approximately 288 days), the dynamic balance becomes <code>0.975808 - 24913601 *0.00000004 = -0.02073604</code>, plus the buffer balance is $0.00345596. The forced settlement threshold is <code>86400* 0.00000004 = 0.003456</code>. The forced settlement will be triggered, and the record of the user will become as below:</p><ul><li><p>CRUD Timestamp: 24913701</p></li><li><p>Static Balance: $0</p></li><li><p>Netflow Rate: $0/sec</p></li><li><p>Buffer Balance: $0</p></li></ul><p>The validators will get the remaining $0.00345596 as a reward. The account will be marked as &quot;frozen&quot; and his objects get downgraded by SPs.</p><p>Every time a stream record is updated, Greenfield calculates the time when the account will be out of balance. So Greenfield can keep an on-chain list to trace the timestamps for the potential forced settlement. The list will be checked by the end of every block processing. When the block time passes the forced settlement timestamp, the settlement of the associated stream accounts will be triggered automatically.</p><h3 id="payment-account" tabindex="-1"><a class="header-anchor" href="#payment-account" aria-hidden="true">#</a> Payment Account</h3><p>Payment account is a special &quot;Stream Account&quot; type in the Payment Module. Users can create multiple payment accounts and have the permission to link buckets to different payment accounts to pay for storage and data package.</p><p>The payment accounts have the below traits:</p><ul><li><p>Every user can create multiple payment accounts. The payment accounts created by the user are recorded with a map on the Greenfield blockchain.</p></li><li><p>The address format of the payment account is the same as normal accounts. It&#39;s derived by the hash of the user address and payment account index. The payment account only exists in the storage payment module. Users can deposit into, withdraw from and query the balance of payment accounts in the payment module, which means payment accounts cannot be used for transfer or staking.</p></li><li><p>Users can only associate their buckets with their payment accounts to pay for storage and bandwidth. Users cannot associate their own buckets with others&#39; payment accounts, and users cannot associate others&#39; buckets with their own payment accounts.</p></li><li><p>The owner of a payment account is the user who creates it. The owner can set it non-refundable. It&#39;s a one-way setting and can not be revoked. Thus, users can set some objects as &quot;public goods&quot; which can receive donations for storage and bandwidth while preserving the ownership.</p></li></ul><h3 id="account-freeze-and-resume" tabindex="-1"><a class="header-anchor" href="#account-freeze-and-resume" aria-hidden="true">#</a> Account Freeze and Resume</h3><p>If a payment account is out of balance, it will be settled and set a flag as out of balance.</p><p>The NetflowRate will be set to 0, while the current settings of the stream pay will be backed up in another data structure. The download speed for all objects under this account will be downgraded.</p><p>If someone deposits into a frozen account and the static balance is enough for reserved fees, the account will be resumed automatically. The stream pay will be recovered from the backup.</p><p>During the OutOfBalance period, no objects can be associated with this payment account again, which results in no object can be created under the bucket associated with the account.</p><p>If the associated object is deleted, the backup stream pay settings will be changed accordingly to ensure it reflects the latest once the account is resumed.</p><h3 id="storage-fee-price-and-adjustment" tabindex="-1"><a class="header-anchor" href="#storage-fee-price-and-adjustment" aria-hidden="true">#</a> Storage Fee Price and Adjustment</h3><p>The storage fee prices are determined by the SPs who supply the storage service. The cost of the SPs are composed of 3 parts:</p><ul><li>The primary SP will store the whole object file.</li><li>The secondary SPs will store part of the object file as a replica.</li><li>The primary SP will supply all the download requests of the object.</li></ul><p>There are 3 different on-chain prices.</p><ul><li>Primary SP Store Price</li><li>Primary SP Read Price</li><li>Secondary SP Store Price</li></ul><p>Every SP can set their own store price and read price via on-chain transactions. While the secondary SP store price is calculated by averaging all SPs&#39; store price.</p><p>The unit of price is a decimal, which indicates wei BNB per byte per second. E.g. the price is 0.027, means approximately $0.022 / GB / Month. (<code>0.027 * (30 * 86400) * (1024 * 1024 * 1024) * 300 / 10 ** 18 â‰ˆ 0.022</code>, assume the BNB price is 300 USD)</p><p>The storage fees are calculated and charged in bucket level. The store price and read price is up to the SP of bucket. The secondary store price is stored in the chain state and the same for all buckets. The total size of all objects and per secondary SP served size in a bucket will be recorded in the bucket metadata. The charge size will be used instead of the real size, e.g. files under 1KB will be charged as 1KB to cover the cost. The payment bill will be calculated by the size statistics and prices, and it will be charged from the stream account specified in the bucket to the SPs.</p><h2 id="state" tabindex="-1"><a class="header-anchor" href="#state" aria-hidden="true">#</a> State</h2><p>The payment module keeps state of the following primary objects:</p><ul><li>The stream payment ledger.</li><li>The payment accounts and total account created by users.</li><li>An AutoSettleRecord list to keep track of the auto-settle timestamp of the stream accounts.</li></ul><p>In addition, the payment module keeps the following indexes to manage the aforementioned state:</p><ul><li>StreamRecord Index. <code>address -&gt; StreamRecord</code></li><li>PaymentAccount Index. <code>address -&gt; PaymentAccount</code></li><li>PaymentAccountCount Index. <code>address -&gt; PaymentAccountCount</code></li><li>AutoSettleRecord Index. <code>settle-timestamp | address -&gt; 0</code></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>message StreamRecord {
  string account = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
  int64 crud_timestamp = 2;
  string netflow_rate = 3 [
    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,
    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,
    (gogoproto.nullable) = false
  ];
  string staticBalance = 4 [
    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,
    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,
    (gogoproto.nullable) = false
  ];
  string bufferBalance = 5 [
    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,
    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,
    (gogoproto.nullable) = false
  ];
  string lockBalance = 6 [
    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,
    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,
    (gogoproto.nullable) = false
  ];
  int32 status = 7;
  int64 settleTimestamp = 8;
  repeated OutFlow outFlows = 9 [(gogoproto.nullable) = false];
}

message PaymentAccount {
  string addr = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
  string owner = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
  bool refundable = 3;
}

message PaymentAccountCount {
  string owner = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
  uint64 count = 2;
}

message AutoSettleRecord {
  int64 timestamp = 1;
  string addr = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="parameters" tabindex="-1"><a class="header-anchor" href="#parameters" aria-hidden="true">#</a> Parameters</h2><p>The payment module contains the following parameters, they can be updated with governance.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>message Params {
  // Time duration which the buffer balance need to be reserved for NetOutFlow e.g. 6 month
  uint64 reserve_time = 1 [(gogoproto.moretags) = &quot;yaml:\&quot;reserve_time\&quot;&quot;];
  // The maximum number of payment accounts that can be created by one user
  uint64 payment_account_count_limit = 2 [(gogoproto.moretags) = &quot;yaml:\&quot;payment_account_count_limit\&quot;&quot;];
  // Time duration threshold of forced settlement.
  // If dynamic balance is less than NetOutFlowRate * forcedSettleTime, the account can be forced settled.
  uint64 forced_settle_time = 3 [(gogoproto.moretags) = &quot;yaml:\&quot;forced_settle_time\&quot;&quot;];
  // the maximum number of accounts that will be forced settled in one block
  uint64 max_auto_force_settle_num = 4 [(gogoproto.moretags) = &quot;yaml:\&quot;max_auto_force_settle_num\&quot;&quot;];
  // The denom of fee charged in payment module
  string fee_denom = 5 [(gogoproto.moretags) = &quot;yaml:\&quot;fee_denom\&quot;&quot;];
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">Key</th><th style="text-align:center;">Type</th><th style="text-align:center;">Example</th></tr></thead><tbody><tr><td style="text-align:center;">reserve_time</td><td style="text-align:center;">uint64</td><td style="text-align:center;">15552000 (180 days)</td></tr><tr><td style="text-align:center;">payment_account_count_limit</td><td style="text-align:center;">uint64</td><td style="text-align:center;">200</td></tr><tr><td style="text-align:center;">forced_settle_time</td><td style="text-align:center;">uint64</td><td style="text-align:center;">604800 (7 days)</td></tr><tr><td style="text-align:center;">max_auto_force_settle_num</td><td style="text-align:center;">uint64</td><td style="text-align:center;">100</td></tr><tr><td style="text-align:center;">fee_denom</td><td style="text-align:center;">string</td><td style="text-align:center;">BNB</td></tr></tbody></table><h2 id="keepers" tabindex="-1"><a class="header-anchor" href="#keepers" aria-hidden="true">#</a> Keepers</h2><p>The payment module keeper provides access to query the parameters, payment account owner, storage price and several ways to update the ledger.</p><p>Currently, it&#39;s only used by the storage module.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>type PaymentKeeper interface {
	GetParams(ctx sdk.Context) paymenttypes.Params
	IsPaymentAccountOwner(ctx sdk.Context, addr string, owner string) bool
	GetStoragePrice(ctx sdk.Context, params paymenttypes.StoragePriceParams) (price paymenttypes.StoragePrice, err error)
	ApplyFlowChanges(ctx sdk.Context, from string, flowChanges []paymenttypes.OutFlow) (err error)
	ApplyUserFlowsList(ctx sdk.Context, userFlows []paymenttypes.UserFlows) (err error)
	UpdateStreamRecordByAddr(ctx sdk.Context, change *paymenttypes.StreamRecordChange) (ret *paymenttypes.StreamRecord, err error)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="messages" tabindex="-1"><a class="header-anchor" href="#messages" aria-hidden="true">#</a> Messages</h2><h3 id="msgcreatepaymentaccount" tabindex="-1"><a class="header-anchor" href="#msgcreatepaymentaccount" aria-hidden="true">#</a> MsgCreatePaymentAccount</h3><p>Used to create new payment account for a user.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>message MsgCreatePaymentAccount {
  option (cosmos.msg.v1.signer) = &quot;creator&quot;;

  // creator is the address of the stream account that created the payment account
  string creator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="msgdeposit" tabindex="-1"><a class="header-anchor" href="#msgdeposit" aria-hidden="true">#</a> MsgDeposit</h3><p>Used to deposit to a stream account.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>message MsgDeposit {
  option (cosmos.msg.v1.signer) = &quot;creator&quot;;

  // creator is the message signer for MsgDeposit and the address of the account to deposit from
  string creator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
  // to is the address of the account to deposit to
  string to = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
  // amount is the amount to deposit
  string amount = 3 [
    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,
    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,
    (gogoproto.nullable) = false
  ];
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="msgwithdraw" tabindex="-1"><a class="header-anchor" href="#msgwithdraw" aria-hidden="true">#</a> MsgWithdraw</h3><p>Used to withdraw from a stream account.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>message MsgWithdraw {
  option (cosmos.msg.v1.signer) = &quot;creator&quot;;

  // creator is the message signer for MsgWithdraw and the address of the receive account
  string creator = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
  // from is the address of the account to withdraw from
  string from = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
  // amount is the amount to withdraw
  string amount = 3 [
    (cosmos_proto.scalar) = &quot;cosmos.Int&quot;,
    (gogoproto.customtype) = &quot;github.com/cosmos/cosmos-sdk/types.Int&quot;,
    (gogoproto.nullable) = false
  ];
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="msgdisablerefund" tabindex="-1"><a class="header-anchor" href="#msgdisablerefund" aria-hidden="true">#</a> MsgDisableRefund</h3><p>Used to make a stream account non-refundable.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>message MsgDisableRefund {
  option (cosmos.msg.v1.signer) = &quot;owner&quot;;

  // owner is the message signer for MsgDisableRefund and the address of the payment account owner
  string owner = 1 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
  // addr is the address of the payment account to disable refund
  string addr = 2 [(cosmos_proto.scalar) = &quot;cosmos.AddressString&quot;];
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/bnb-chain/greenfield-docs/edit/master/src/docs/greenfield-blockchain/modules/billing-and-payment.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: 296179868@qq.com">zjubfd</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/docs/greenfield-blockchain/modules/storage-provider.html" class="nav-link prev" aria-label="Storage Provider"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->Storage Provider</div></a><a href="/docs/greenfield-blockchain/modules/permission.html" class="nav-link next" aria-label="Permission"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Permission<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Copyright Â© 2023 BNB-Chain.</div><!----></footer></div><!--]--><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-770b0b9b.js" defer></script>
  </body>
</html>
